---
layout: post
title: "Linux 系统状态监控（WIP）"
date: 2024-06-15 20:35:09 +0800
categories: post
---

#### **引言**

今天想了解下 Linux 系统状态监控，写一些关于运维方面的内容，主要关注以下两个问题：

1. 如何判断当前服务器的运行状态是否正常？
2. 如何获取某一个的服务（进程）的资源占用情况？

#### **查看 Linux 系统内核、发行版及硬件信息**

查看当前 Linux 系统的内核版本

``` Bash
uname -r
cat /proc/version
```

查看当前 Linux 系统属于哪一个发行版

``` Bash
cat /etc/os-release

# 只适用于支持 LSB（Linux Standard Base）的发行版，Arch、Gentoo 等发行版默认不支持 LSB
lsb_release -a
```

查看 CPU 信息

``` Bash
# 查看 CPU 信息
cat /proc/cpuinfo

# 查看 CPU 核心数量
grep -c 'model name' /proc/cpuinfo
```

查看内存大小及使用情况

``` Bash
free -h
cat /proc/meminfo
```

查看磁盘大小及使用情况

``` Bash
# 列出系统中文件系统的磁盘使用情况
df -h

# 查看某一个文件夹占用的磁盘大小
du -h --max-depth=1 ${path_to_dir}

# 列出系统中所有块设备的信息，包括硬盘和分区
lsblk

# 列出系统中所有磁盘的详细信息
sudo fdisk -l
```

#### **top 命令**

![top](/assets/imgs/top.png)

关于 Linux 系统状态监控，我最先想到的是 top（/usr/bin/top）命令，大多数 Linux 发行版都会预先安装这个工具，但我一直没有深入研究过。

top 的默认输出可以分为上下两部分，上面部分是系统的运行情况，下面部分是每个**任务**的运行情况，关于输出内容的说明可以使用下面命令查看。

``` Shell
man -P "less -p '^2\.\sSUMMARY\sDisplay'" top
```

top 命令默认输出的第一行与 uptime（/usr/bin/uptime）命令的输出是一致的，关于 load average 可以参考[理解Linux系统负荷](https://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html)。
